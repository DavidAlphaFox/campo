<div class="drawer drawer-permanent">
  <div class="drawer-content">
    <div class="brand">
      <img src="<%= asset_pack_path 'media/images/logo.png' %>">
      <span>Campo</span>
    </div>
    <div class="drawer-menu">
      <a href="<%= root_path %>" class="drawer-item <%= 'active' if controller_name == 'home' %>">
        <div class="drawer-item-icon">
          <i class="material-icons">home</i>
        </div>
        Home
      </a>
      <a href="" class="drawer-item">
        <div class="drawer-item-icon">
          <i class="material-icons">star</i>
        </div>
        Starred
      </a>
    </div>
    <div class="divider">
    </div>
    <div class="subtitle">
      Forums
    </div>
    <div class="drawer-menu">
      <% Forum.all.each do |forum| %>
        <a href="<%= forum_path(forum) %>" class="drawer-item <%= 'active' if @forum == forum %>">
          <div class="drawer-item-icon">
            <i class="material-icons">label</i>
          </div>
          <%= forum.name %>
        </a>
      <% end %>
    </div>
  </div>
</div>

<main class="main with-appbar">
  <div class="appbar appbar-primary appbar-fixed">
    <div class="toolbar">
      <div class="toolbar-title">
        <% case controller_name when 'home' %>
          Home
        <% when 'forums' %>
          <%= @forum.name %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="container">
    <div data-controller="infinite-page" data-infinite-page-page="<%= @topics.current_page %>" data-infinite-page-reached-end="<%= @topics.last_page? %>">
      <div class="list" data-target="infinite-page.container">
        <%= render partial: 'topics/topic', collection: @topics, cached: -> topic { [I18n.locale, topic] } %>
      </div>
      <div class="infinite-page-loading-placeholder p-4 text-muted text-center">
        <i class="fas fa-circle-notch fa-spin fa-lg"></i>
      </div>
    </div>
  </div>
</main>
